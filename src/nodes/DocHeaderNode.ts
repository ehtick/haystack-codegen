/*
 * Copyright (c) 2021, J2 Innovations. All Rights Reserved
 */

import { Node } from './Node'

const DATE_OPTIONS: Intl.DateTimeFormatOptions = {
	year: '2-digit',
	month: '2-digit',
	day: '2-digit',
	hour: '2-digit',
	minute: '2-digit',
	second: '2-digit',
}

/**
 * Generates the header for a document.
 */
export class DocHeaderNode implements Node {
	readonly newLines = 1

	generateCode(out: (code: string) => void): void {
		out('/*')
		out(
			` * Automatically generated by haystack-codegen on ${this.toDateString()}.`
		)
		out(' */')
		out('')
		out('/* eslint @typescript-eslint/no-namespace: "off" */')
	}

	toDateString(): string {
		return new Date().toLocaleDateString(undefined, DATE_OPTIONS)
	}
}
